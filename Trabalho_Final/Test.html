<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Teste Trabalho Final</title>
    <link rel="stylesheet" href="css/dc.css">
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/crossfilter.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="js/dc.js" charset="utf-8"></script>

</head>
<body>

  <div><h1>Total de bugs por projeto</h1>
     <div id="chartBugs_Projeto"></div>
  </div>
  <br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br>
  <div><h1>Quantidade de casos de teste por projeto</h1>
     <div id="chartTC_Projeto"></div>
  </div>


  <script type="text/javascript">
        // Chart Bugs por release de um determinado projeto
        var barChartBugs_Projeto = dc.barChart('#chartBugs_Projeto');
      //  var barChartTC_Projeto = dc.barChart('#chartTC_Projeto');

        d3.json("Data_Analysis.json", function(error, data) {
          // formatando nossos dados
          data.forEach(function(d) {
            d.Qnt_Bugs = +d.Qnt_Bugs;
        });
          //criando um crossfilter
          var facts = crossfilter(data);

          var projectDim = facts.dimension(function(d){
                return d.Project;
          });

          var bugsByProjeto = projectDim.group().reduceSum(function(d){
                return d.Qnt_Bugs;
          });

          //var tcByProjeto = projectDim.group().reduceSum(function(d){
          //      return d.Qnt_TC_SW;
          //});

          barChartBugs_Projeto
            .width(900).height(300)
            .margins({top: 10, right: 10, bottom: 50, left: 50})
            .dimension(projectDim)
            .x(d3.scale.ordinal())
            .xUnits(dc.units.ordinal)
            .barPadding(0.2)
            .group(bugsByProjeto)
            .yAxisLabel("Qnt Bugs")
            .xAxisLabel("Projetos")

        /*     barChartTC_Projeto
              .width(900).height(300)
              .margins({top: 10, right: 10, bottom: 50, left: 50})
              .dimension(projectDim)
              .x(d3.scale.ordinal())
              .xUnits(dc.units.ordinal)
              .barPadding(0.2)
              .group(tcByProjeto)
              .yAxisLabel("Qnt Casos de Testes")
              .xAxisLabel("Projetos")
*/


          dc.renderAll();

		});
	</script>
</body>
</html>
